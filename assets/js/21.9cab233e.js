(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{377:function(e,s,a){"use strict";a.r(s);var t=a(1),r=Object(t.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("Kubesphere，读作：库伯思菲尔。")]),e._v(" "),s("h2",{attrs:{id:"kubesphere"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubesphere"}},[e._v("#")]),e._v(" Kubesphere")]),e._v(" "),s("p",[e._v("Kubesphere，读作：库伯思菲尔。"),s("a",{attrs:{href:"https://kubesphere.io/zh/docs/quick-start/all-in-one-on-linux/",target:"_blank",rel:"noopener noreferrer"}},[e._v("官网文档"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("下载KubeKey")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("KKZONE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("cn\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-sfL")]),e._v(" https://get-kk.kubesphere.io "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("VERSION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("v1.2.1 "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" -\n")])])])]),e._v(" "),s("li",[s("p",[e._v("安装Kubesphere")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x kk\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 如果没装conntrack")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# apt install conntrack")]),e._v("\n./kk create cluster --with-kubernetes v1.21.5 --with-kubesphere v3.2.1\n")])])])]),e._v(" "),s("li",[s("p",[e._v("配置服务器安全组 "),s("code",[e._v("30880")]),e._v("，就可以访问到界面了。")])])]),e._v(" "),s("h3",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[e._v("#")]),e._v(" 使用")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("创建用户")])]),e._v(" "),s("li",[s("p",[e._v("创建企业空间，并邀请用户成为企业空间成员")])]),e._v(" "),s("li",[s("p",[e._v("创建项目，并在 "),s("code",[e._v("项目设置 > 项目成员")]),e._v(" 中邀请用户")])]),e._v(" "),s("li",[s("p",[e._v("开启 "),s("code",[e._v("devOps")]),e._v(",在 "),s("code",[e._v("集群管理 > CRD")]),e._v(" 搜索 "),s("code",[e._v("clusterconfiguration")]),e._v(" 进入，在 "),s("code",[e._v("ks-installer")]),e._v(" 右侧选择 "),s("code",[e._v("编辑 YAML")]),e._v("：")]),e._v(" "),s("div",{staticClass:"language-ymal extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("devops:\n    enabled: true # 将“false”更改为“true”\n")])])]),s("p",[e._v("可以通过 "),s("code",[e._v("Kubectl")]),e._v(" 查看安装日志：")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("kubectl logs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-n")]),e._v(" kubesphere-system "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),e._v("kubectl get pod "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-n")]),e._v(" kubesphere-system "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-l")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("ks-install "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-o")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("jsonpath")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{.items[0].metadata.name}'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v("\n")])])])])]),e._v(" "),s("h3",{attrs:{id:"部署应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署应用"}},[e._v("#")]),e._v(" 部署应用")]),e._v(" "),s("ol",[s("li",[e._v("在 "),s("code",[e._v("配置 > 保密字典")]),e._v(" 中添加数据库密码和阿里云镜像仓库")]),e._v(" "),s("li",[e._v("在 "),s("code",[e._v("存储 > 数据卷")]),e._v(" 中添加一个数据卷")]),e._v(" "),s("li",[e._v("在 "),s("code",[e._v("应用负载 > 应用 > 自制应用")]),e._v(" 中创建一个应用，并添加服务")]),e._v(" "),s("li",[e._v("已 "),s("code",[e._v("MySQL")]),e._v(" 为例添加无状态服务：\n"),s("ul",[s("li",[s("strong",[e._v("基本信息")]),e._v("中填写名称")]),e._v(" "),s("li",[s("strong",[e._v("容器组设置")]),e._v("中添加容器，搜索 "),s("code",[e._v("mysql:5.7")]),e._v(" 点击 "),s("code",[e._v("使用默认端口")]),e._v("，点击"),s("strong",[e._v("高级设置")]),e._v("设置下CPU和内存配额，"),s("strong",[e._v("环境变量")]),e._v("中添加 "),s("code",[e._v("TZ")]),e._v(" 和 "),s("code",[e._v("MYSQL_ROOT_PASSWORD")])]),e._v(" "),s("li",[s("strong",[e._v("存储卷设置")]),e._v("中点击 "),s("code",[e._v("挂载存储卷")]),e._v("，现有存储卷选择你之前创建的数据卷，选择读写，挂载路径填写 "),s("code",[e._v("/var/lib/mysql")])]),e._v(" "),s("li",[s("strong",[e._v("高级设置")]),e._v("中外部访问模式选择 "),s("code",[e._v("NodePort")]),e._v("\n等 "),s("code",[e._v("应用负载 > 工作负载 > 部署")]),e._v(" 中的 "),s("code",[e._v("mysql-v1")]),e._v(" 显示为运行中，就能访问到 "),s("code",[e._v("MySQL")]),e._v(" 了，外网端口在 "),s("code",[e._v("应用负载 > 服务")]),e._v(" 中查看，是自动生成的如："),s("code",[e._v("31859")])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);